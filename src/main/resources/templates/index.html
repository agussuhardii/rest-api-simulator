<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet"/>

    <title>Rest Simulator</title>
</head>
<body>


<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="/">Rest Simulator</a>
    <span></span>

    <div>

        <a type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#staticBackdrop"
           onclick="refreshLogs()">
            <i class="bi bi-clock-history text-secondary"></i> Logs
        </a>

    </div>

</header>

<div class="container-fluid">
    <div class="row">
        <main>
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">

                <div style="display: flex">
                    <form method="get" th:action="@{/}" class="row g-3">
                        <div class="col-auto">
                            <input class="form-control" name="title" placeholder="Enter Project Name"
                                   th:value="${title}" type="text">
                        </div>
                    </form>
                    <a type="button" class="btn btn-outline-secondary" href="/" th:if="${param.title}">
                        <i class="bi bi-x-lg text-danger"></i>
                    </a>
                </div>

                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group me-2">

                        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal"
                                th:attr="data-bs-target=${'#addModal'}">
                            <i class="bi bi-bookmark-plus-fill text-primary"></i> Create Url
                        </button>

                    </div>
                </div>
            </div>


            <div id="home">
                <div class="table-responsive">
                    <table class="table table-striped table-sm">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Project</th>
                            <th scope="col">Name</th>
                            <th scope="col">Method</th>
                            <th scope="col">Path URL</th>
                            <th scope="col">Request Params</th>
                            <th scope="col">Request Body</th>
                            <th scope="col">Response</th>
                            <th scope="col">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="item, i : ${contents}">
                            <td th:text="${(i.index +1)}">no</td>
                            <td th:text="${item.getProjectName()}">Project</td>
                            <td th:text="${item.getName()}">name</td>
                            <td th:text="${item.getMethod()}">method</td>
                            <td th:text="${'/'+item.getProjectName()+item.getPathUrl()}">url</td>
                            <td th:text="${item.getParams()}"> params</td>
                            <td th:text="${item.getBody()}"> request</td>
                            <td th:text="${item.getSuccessResponseBody()}"> response</td>
                            <td style="width: 200px">

                                <a data-bs-toggle="modal" style="cursor: pointer" class="btn btn-outline-secondary"
                                   th:attr="data-bs-target=${'#detailModal'+item.getId()}">
                                    <i class="bi bi-eye-fill"></i>
                                </a>

                                <a data-bs-toggle="modal" style="cursor: pointer" class="btn btn-outline-warning"
                                   th:attr="data-bs-target=${'#updateModal'+item.getId()}">
                                    <i class="bi bi-pencil-fill"></i>
                                </a>

                                <a data-bs-toggle="modal" style="cursor: pointer" class="btn btn-outline-primary"
                                   th:attr="data-bs-target=${'#duplicateModal'+item.getId()}">
                                    <i class="bi bi-clipboard-fill"></i>
                                </a>

                                <a data-bs-toggle="modal" style="cursor: pointer" class="btn btn-outline-danger"
                                   th:attr="data-bs-target=${'#deleteModal'+item.getId()}">
                                    <i class="bi bi-trash-fill"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>


        </main>
    </div>
</div>


<div aria-hidden="true" class="modal fade" tabindex="-1" th:attr="id=${'detailModal' + item.getId()}"
     th:each="item : ${contents}"
     data-bs-keyboard="false" aria-labelledby="staticBackdropLabel"
>

    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" th:text="${item.getName()}">
                </h5>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-sm">

                    <tr>
                        <th style="width: 100px">Project Name</th>
                        <td>:</td>
                        <td><b th:text="${item?.getProjectName()}" class="text-dark"></b>
                        </td>
                    </tr>

                    <tr>
                        <th>Path URL</th>
                        <td>:</td>
                        <td th:text="${'/'+item.getProjectName()+item.getPathUrl()}">
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3" style="text-align: center; vertical-align: middle;"><h4>Request</h4></td>
                    </tr>

                    <tr>
                        <th>Method</th>
                        <td>:</td>
                        <td th:text="${item?.getMethod()}">
                        </td>
                    </tr>

                    <tr>
                        <th>Header</th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getRequestHeaders()}]]</div>
                        </td>
                    </tr>

                    <tr>
                        <th> Params
                        </th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getParams()}]]
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th> Body
                        </th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getBody()}]]
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3" style="text-align: center; vertical-align: middle;"><h4 class="text-primary">
                            Success Response</h4></td>
                    </tr>

                    <tr>
                        <th>Http Code</th>
                        <td>:</td>
                        <td th:text="${item?.getSuccessResponseCode()}">
                        </td>
                    </tr>

                    <tr>
                        <th>Header</th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getSuccessResponseHeader()}]]
                            </div>
                        </td>
                    </tr>


                    <tr>
                        <th>Body</th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getSuccessResponseBody()}]]
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3" style="text-align: center; vertical-align: middle;"><h4 class="text-danger">Fail
                            Response</h4></td>
                    </tr>


                    <tr>
                        <th>Http Code</th>
                        <td>:</td>
                        <td th:text="${item?.getFailResponseCode()}">
                        </td>
                    </tr>

                    <tr>
                        <th>Header</th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getFailResponseHeader()}]]
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <th>Body</th>
                        <td>:</td>
                        <td>
                            <div th:inline="text" style="white-space: pre-wrap;">[[${item?.getFailResponseBody()}]]
                            </div>
                        </td>
                    </tr>


                    <tr>
                        <td colspan="3" style="text-align: center; vertical-align: middle;"><h4 class="text-info">
                            More</h4></td>
                    </tr>


                    <tr>
                        <th>Response In millisecond</th>
                        <td>:</td>
                        <td th:text="${item?.getResponseInNanoSecond()}">
                        </td>
                    </tr>

                    <tr>
                        <th>Note</th>
                        <td>:</td>
                        <td th:text="${item?.getDescription()}">
                        </td>
                    </tr>


                </table>
            </div>
            &nbsp;

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true"
     th:attr="id=${'deleteModal' + item.getId()}"
     th:each="item : ${contents}"
>
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle"
                    th:text="${'Do you want to permanent delete  '+item.getName()}"></h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-sm">

                        <tr>
                            <th style="width: 10px">Name</th>
                            <td>:</td>
                            <td th:text="${item?.getName()}">
                            </td>
                        </tr>

                        <tr>
                            <th>Project Name</th>
                            <td>:</td>
                            <td th:text="${item?.getProjectName()}">
                            </td>
                        </tr>

                        <tr>
                            <th>Method</th>
                            <td>:</td>
                            <td th:text="${item?.getMethod()}">
                            </td>
                        </tr>

                        <tr>
                            <th>Path URL</th>
                            <td>:</td>
                            <td th:text="${item?.getPathUrl()}">
                            </td>
                        </tr>

                    </table>
                </div>
                &nbsp;
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" th:attr="onclick='del(\'' + ${item.getId()}+  '\');'">
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true"
     th:attr="id=${'addModal'}"
     data-bs-backdrop="static" data-bs-keyboard="false"
>
    <div class="modal-dialog modal-dialog-centered" role="document">

        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create new</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <form onsubmit='return false;' id="addModal">
                <div class="modal-body">
                    <div>

                        <div class="mb-3">
                            <label for="project" class="form-label">Project Name</label>
                            <input type="text" class="form-control" name="projectName" required
                                   th:value="${param.title}" placeholder="Combine alphabet and  number">
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" name="name" required placeholder="Get all data">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Path Url</label>
                            <input type="text" class="form-control" name="pathUrl" required placeholder="/api/v1/users">
                        </div>

                        <h4>Request</h4>

                        <div class="mb-3">
                            <label class="form-label">Method</label>
                            <select class="form-select" aria-label="Default select example" name="method"
                                    required>
                                <option value="POST">POST</option>
                                <option value="GET">GET</option>
                                <option value="PUT">PUT</option>
                                <option value="DELETE">DELETE</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Headers(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="requestHeaders"
                                      placeholder='{"Authorization":"Bearer Bearer AbCdEf123456"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Params(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="params" placeholder='{"q":"jakarta"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Body(Json Format)</label>
                            <textarea type="text" class="form-control" required
                                      name="body" placeholder='{"name":"agus", "gender":"Man"}'></textarea>
                        </div>

                        <h4 class="text-primary">Success Response</h4>

                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control"
                                   name="successResponseCode" required value="200">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Header(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseHeader"
                                      placeholder='{"Content-Type":"application/json"}' required></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Body(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseBody" required
                                      placeholder='{"data":[{"name":"melon"}, {"name":"banana"}]}'></textarea>
                        </div>

                        <h4 class="text-danger">Fail Response</h4>

                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control" name="failResponseCode"
                                   required value="400">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Header(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseHeader" required
                                      placeholder='{"Content-Type":"application/json"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Body(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseBody" required
                                      placeholder='{"message":"bad request"}'></textarea>
                        </div>


                        <h4 class="text-info">More</h4>


                        <div class="mb-3">
                            <label class="form-label">Response In milis (zero not waiting response)</label>
                            <input type="number" class="form-control" value="0"
                                   name="responseInNanoSecond">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea type="text" class="form-control" name="description"></textarea>
                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="save">Save</button>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal fade" id="update" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true"
     th:attr="id=${'updateModal' + item.getId()}"
     th:each="item : ${contents}"
     data-bs-backdrop="static" data-bs-keyboard="false"
>
    <div class="modal-dialog modal-dialog-centered" role="document">

        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Update <span th:text="${item.getName()}"></span></h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <form onsubmit='return false;' id="updateModal">
                <div class="modal-body">
                    <div>

                        <input type="hidden" name="id" th:value="${item.getId()}">

                        <div class="mb-3">
                            <label for="project" class="form-label">Project Name</label>
                            <input type="text" class="form-control" id="project" name="projectName" required
                                   th:value="${item.getProjectName()}" placeholder="Combine alphabet and  number">
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name" required
                                   th:value="${item.getName()}" placeholder="Get all data">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Path Url</label>
                            <input type="text" class="form-control" name="pathUrl" required
                                   th:value="${item.getPathUrl()}" placeholder="/api/v1/users">
                        </div>

                        <h4>Request</h4>

                        <div class="mb-3">
                            <label class="form-label">Method</label>
                            <select class="form-select" aria-label="Default select example" name="method"
                                    required>
                                <option value="POST" th:selected="${item.getMethod().name()=='POST'}">POST</option>
                                <option value="GET" th:selected="${item.getMethod().name()=='GET'}">GET</option>
                                <option value="PUT" th:selected="${item.getMethod().name()=='PUT'}">PUT</option>
                                <option value="DELETE" th:selected="${item.getMethod().name()=='DELETE'}">DELETE
                                </option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Headers(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="requestHeaders" th:text="${item.getRequestHeaders()}"
                                      placeholder='{"Authorization":"Bearer Bearer AbCdEf123456"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Params(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="params" th:text="${item.getParams()}"
                                      placeholder='{"q":"jakarta"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="body" th:text="${item.getBody()}"
                                      placeholder='{"name":"agus", "gender":"Man"}'></textarea>
                        </div>


                        <h4 class="text-primary">Success Response</h4>

                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control"
                                   name="successResponseCode" required th:value="${item.getSuccessResponseCode()}">
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Header(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseHeader" required
                                      th:text="${item.getSuccessResponseHeader()}"
                                      placeholder='{"Content-Type":"application/json"}'></textarea>
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseBody" required
                                      th:text="${item.getSuccessResponseBody()}"
                                      placeholder='{"data":[{"name":"melon"}, {"name":"banana"}]}'></textarea>
                        </div>


                        <h4 class="text-danger">Fail Response</h4>


                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control" name="failResponseCode"
                                   required th:value="${item.getFailResponseCode()}">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Header(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseHeader"
                                      th:text="${item.getFailResponseHeader()}"
                                      placeholder='{"Content-Type":"application/json"}'></textarea>
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseBody" required
                                      th:text="${item.getFailResponseBody()}"
                                      placeholder='{"message":"bad request"}'></textarea>
                        </div>


                        <h4 class="text-info">More</h4>


                        <div class="mb-3">
                            <label class="form-label">Response In milis</label>
                            <input type="number" class="form-control" value="0"
                                   name="responseInNanoSecond" th:value="${item.getResponseInNanoSecond()}">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea type="text" class="form-control" name="description"
                                      th:text="${item.getDescription()}"></textarea>
                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Update</button>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal fade" id="duplicate" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true"
     th:attr="id=${'duplicateModal' + item.getId()}"
     th:each="item : ${contents}"
     data-bs-backdrop="static" data-bs-keyboard="false"
>

    <div class="modal-dialog modal-dialog-centered" role="document">

        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Duplicate</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <form onsubmit='return false;' id="duplicateModal">
                <div class="modal-body">
                    <div>

                        <div class="mb-3">
                            <label for="project" class="form-label">Project Name</label>
                            <input type="text" class="form-control"  name="projectName" required
                                   th:value="${item.getProjectName()}" placeholder="Combine alphabet and  number">
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" name="name" required
                                   th:value="${item.getName()}" placeholder="Get all data">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Path Url</label>
                            <input type="text" class="form-control" name="pathUrl" required
                                   th:value="${item.getPathUrl()}" placeholder="/api/v1/users">
                        </div>

                        <h4>Request</h4>

                        <div class="mb-3">
                            <label class="form-label">Method</label>
                            <select class="form-select" aria-label="Default select example" name="method"
                                    required>
                                <option value="POST" th:selected="${item.getMethod().name()=='POST'}">POST</option>
                                <option value="GET" th:selected="${item.getMethod().name()=='GET'}">GET</option>
                                <option value="PUT" th:selected="${item.getMethod().name()=='PUT'}">PUT</option>
                                <option value="DELETE" th:selected="${item.getMethod().name()=='DELETE'}">DELETE
                                </option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Headers(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="requestHeaders" th:text="${item.getRequestHeaders()}"
                                      placeholder='{"Authorization":"Bearer Bearer AbCdEf123456"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Params(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="params" th:text="${item.getParams()}"
                                      placeholder='{"q":"jakarta"}'></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control" required
                                      name="body" th:text="${item.getBody()}"
                                      placeholder='{"name":"agus", "gender":"Man"}'></textarea>
                        </div>


                        <h4 class="text-primary">Success Response</h4>

                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control"
                                   name="successResponseCode" required th:value="${item.getSuccessResponseCode()}">
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Header(Json Format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseHeader" required
                                      th:text="${item.getSuccessResponseHeader()}"
                                      placeholder='{"Content-Type":"application/json"}'></textarea>
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="successResponseBody" required
                                      th:text="${item.getSuccessResponseBody()}"
                                      placeholder='{"data":[{"name":"melon"}, {"name":"banana"}]}'></textarea>
                        </div>


                        <h4 class="text-danger">Fail Response</h4>


                        <div class="mb-3">
                            <label class="form-label">Http Code</label>
                            <input type="number" class="form-control" name="failResponseCode"
                                   required th:value="${item.getFailResponseCode()}">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Header(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseHeader"
                                      th:text="${item.getFailResponseHeader()}"
                                      placeholder='{"Content-Type":"application/json"}'></textarea>
                        </div>


                        <div class="mb-3">
                            <label class="form-label">Body(Json format)</label>
                            <textarea type="text" class="form-control"
                                      name="failResponseBody" required
                                      th:text="${item.getFailResponseBody()}"
                                      placeholder='{"message":"bad request"}'></textarea>
                        </div>


                        <h4 class="text-info">More</h4>


                        <div class="mb-3">
                            <label class="form-label">Response In milis</label>
                            <input type="number" class="form-control" value="0"
                                   name="responseInNanoSecond" th:value="${item.getResponseInNanoSecond()}">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea type="text" class="form-control" name="description"
                                      th:text="${item.getDescription()}"></textarea>
                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Update</button>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal fade" id="staticBackdrop" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Logs <b th:text="${param.title}"></b></h5>

                <a type="button" class="btn btn-outline-secondary"
                   onclick="refreshLogs()">
                    <i class="bi bi-arrow-clockwise text-secondary"></i> refresh
                </a>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover responsive" id="table_logs">

                        <thead>
                        <tr>
                            <th>Request Date</th>
                            <th>Path Url</th>
                            <th>Method</th>
                            <th>Params</th>
                            <th>Body</th>
                            <th>Header</th>

                        </tr>
                        </thead>
                        <tbody>
                        <!-- data -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<script th:inline="javascript">
    /*<![CDATA[*/

    const params = /*[[${param}]]*/ '';

    function del(id) {
        $(document).ready(function () {
            $.ajax({
                url: '/?id=' + id,
                type: 'DELETE',
                dataType: 'json',
                success: function (response) {
                    location.reload();
                },
                error: function (e) {
                    console.log('Failed ');
                }
            });
        });
    }

    const serialize_form = form => JSON.stringify(
        Array.from(new FormData(form).entries())
            .reduce((m, [key, value]) => Object.assign(m, {[key]: value}), {})
    );


    $(document).on('submit', '#addModal', function (e) {
        event.preventDefault();
        const json = serialize_form(this);
        // console.log(json);
        $.ajax({
            type: 'POST',
            url: '/',
            dataType: 'json',
            data: json,
            contentType: 'application/json',
            success: function (data) {

                location.reload();
            },

            error: function (xhr, status, error) {
                const response = JSON.parse(xhr.responseText);
                alert(response.message)
            },
        });
    });


    $(document).on('submit', '#updateModal', function (e) {
        event.preventDefault();
        const json = serialize_form(this);
        $.ajax({
            type: 'PUT',
            url: '/',
            dataType: 'json',
            data: json,
            contentType: 'application/json',
            success: function (data) {
                location.reload();
            },

            error: function (xhr, status, error) {
                const response = JSON.parse(xhr.responseText);
                alert(response.message)
            },
        });
    });


    $(document).on('submit', '#duplicateModal', function (e) {
        event.preventDefault();
        const json = serialize_form(this);
        $.ajax({
            type: 'POST',
            url: '/',
            dataType: 'json',
            data: json,
            contentType: 'application/json',
            success: function (data) {
                location.reload();
            },

            error: function (xhr, status, error) {
                const response = JSON.parse(xhr.responseText);
                alert(response.message)
            },
        });
    });

    function bindDataTo_table_logs(data) {
        $('#table_logs').dataTable({
            "aaSorting": [0, 'desc'],
            "paging": true,
            searching: false,
            bLengthChange: false,
            aaData: data,
            "bDestroy": true,
            columns: [
                {
                    "data": "createdAt"
                },
                {
                    "data": "pathUrl"
                },
                {
                    "data": "method"
                },
                {
                    "data": "params"
                },

                {
                    "data": "body"
                },
                {
                    "data": "header"
                },
            ],
        })
    }

    function refreshLogs() {
        let path = params.title === undefined ? '' : params.title;
        $.ajax({
            headers: {
                'Content-Type': 'application/json'
            },
            url: '/?projectName=' + path,
            type: 'PATCH',
            dataType: 'json',
            success: function (response) {
                bindDataTo_table_logs(response.data);
            }
        });
    }


    /*]]>*/
</script>


</body>
</html>